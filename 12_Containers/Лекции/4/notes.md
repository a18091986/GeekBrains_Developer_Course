- Понятие “Слои” в образах в контейнерах
- Архитектура образа
- Инструкции dockerfile

-- FROM - задает базовый образ

FROM ubuntu:22.10

-- LABEL - добавление метаданных в образ

LABEL maintaner="Andrey"

-- ENV - задает постоянные переменные образа

ENV ADMIN='admin'

-- ARG - задание переменных во время сборки образа. имеет значение по умолчанию.

ARG test_var=script.py

-- RUN - ваыполнение команды Linux

RUN apt update

RUN apt upgrade

-- COPY - копирование файлов и папок. При отсутствии пути к директории в образе - будет создан

COPY ./test.sh

-- ADD - копирование файлов и папок + распаковка архивов. В этой инструкции можно в качестве источника указывать адрес в интернете для скачивания. 

ADD https://github.com/.... /testdir

-- WORKDIR - задание рабочей директории. рекомендуется использовать абсолютный путь

WORKDIR /test123

-- CMD - задание команды, выполняющейся при запуске образа. Аргументы, которые передаются в cmd можно переопределить при запуске. Результат выполнения данной команды не добавляется в образ при его сборке

CMD ["python", "./testscrypt.py"]

CMD ["bash", "uname -a"]

-- ENTRYPOINT - задание команды, выполняющейся при запуске образа. Эти аргументы переопределить нельзя. Используется при выполнении одной и той же команды раз за разом, когда контейнер используется в роли приложения.

ENTRYPOINT ["python", "./testscrypt.py"]

-- EXPOSE - открытие порта в образ/контейнер. Она не открывает порты самостоятельно. Просто является указанием для использования контейнера

EXPOSE 8080

-- VOLUME - создание точки монтирования. указывает место в локальной системе, где контейнер будет хранить данные.

VOLUME /my_volume


- Взаимосвязь размера образа и его компонент



- Основные практики создания образов